<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: imjos
  Date: 9/10/2023
  Time: 20:35
-->
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title>Inicio de Sesión</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://kit.fontawesome.com/f7c3a2243e.js"></script>
    <link rel="stylesheet" href="resources/css/login.css"/>
</h:head>

<h:body>
    <ui:fragment rendered="#{sessionScope.emple.estado ne 'no'}">
        <div class="navbar navbar-expand-lg navbar-light bg-light lead">
            <h:commandLink styleClass="navbar-brand" action="inicio.xhtml">
                <h:graphicImage url="../resources/img/logo.png" width="100" height="50"/>
            </h:commandLink>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <h:panelGroup styleClass="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <h:outputLink styleClass="nav-link" value="#" onclick="history.go(-1); return false;">Regresar</h:outputLink>
                    </li>
                </ul>
                <h:panelGroup styleClass="form-inline my-2 my-lg-0">
                    <input type="hidden" name="accion" value="finalizar"/>
                    <div class="col-mb-4 d-flex align-items-center">
                        <h:outputText styleClass="text-black mr-3 lead" value="#{sessionScope.emple.nombres} #{sessionScope.emple.apellidos}"/>
                        <h:form>
                            <h:commandButton styleClass="btn btn-outline-dark my-2 my-sm-0"  value="Cerrar Sesión" action="#{loginManaged.logOut()}"/>
                        </h:form>
                    </div>
                </h:panelGroup>
            </h:panelGroup>
        </div>
    </ui:fragment>
    <div class="container center-container">
        <div class="jumbotron">
            <h:form>
                <div class="form-group">
                    <h1 class="display-4 text-center">Cambiar Contraseña</h1>
                    <p:password  placeholder="Contraseña actual" styleClass="form-control" value="#{empleadoManaged.contraTemp}" validator="validaciones" id="contraseña_actual"/>
                </div>
                <div class="form-group">
                    <p:password  placeholder="Contraseña nueva" styleClass="form-control" value="#{empleadoManaged.contraTemp2}" validator="validaciones" id="contraseña_nueva"
                                 feedback="true" />
                </div>
                <div class="form-group">
                    <p:password  placeholder="Vuelve a escribir la contraseña nueva" id="repetición_de_contraseña_nueva" styleClass="form-control" validator="validaciones"
                                 feedback="true"  value="#{empleadoManaged.contraTemp3}"/>
                </div>
                <p:messages id="messages" showDetail="true" showIcon="false">
                    <p:autoUpdate/>
                </p:messages>
                <center>
                    <h:commandButton value="Cambiar Contraseña" class="btn btn-outline-light" action="#{empleadoManaged.cambiarContra(sessionScope.emple.codigo, sessionScope.emple.contraseña, sessionScope.emple.nombres, sessionScope.emple.apellidos, sessionScope.emple.rol)}"/>
                </center>
            </h:form>
        </div>
    </div>
</h:body>

</html>